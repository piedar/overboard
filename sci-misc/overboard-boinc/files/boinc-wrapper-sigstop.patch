From fce4c84deaa443e4666e76e1daf6971133f44902 Mon Sep 17 00:00:00 2001
From: Benn Snyder <benn.snyder@gmail.com>
Date: Sun, 28 Jan 2024 13:01:58 -0500
Subject: [PATCH 1/4] fix: use SIGSTOP for reliable pause

---
 lib/proc_control.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/lib/proc_control.cpp b/lib/proc_control.cpp
index 71f783d02f..090574ca4b 100644
--- a/lib/proc_control.cpp
+++ b/lib/proc_control.cpp
@@ -256,7 +256,7 @@ void suspend_or_resume_descendants(bool resume) {
     int pid = getpid();
     get_descendants(pid, descendants);
     for (unsigned int i=0; i<descendants.size(); i++) {
-        kill(descendants[i], resume?SIGCONT:SIGTSTP);
+        kill(descendants[i], resume?SIGCONT:SIGSTOP);
     }
 #endif
 }
@@ -269,7 +269,7 @@ void suspend_or_resume_process(int pid, bool resume) {
     pids.push_back(pid);
     suspend_or_resume_threads(pids, 0, resume, false);
 #else
-    ::kill(pid, resume?SIGCONT:SIGTSTP);
+    ::kill(pid, resume?SIGCONT:SIGSTOP);
 #endif
 }
 
-- 
2.43.0

